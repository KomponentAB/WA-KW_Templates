import{g as _,b as v}from"./init-1e608982.js";var n=(o=>(o.wood="wood",o.forest="forest",o.snow="snow",o.marble="marble",o.stone="stone",o.mud="mud",o.path="path",o.water="water",o.sand="sand",o))(n||{});const d={[n.wood]:["/sounds/wood_01_a.wav","/sounds/wood_01_b.wav","/sounds/wood_01_c.wav","/sounds/wood_01_d.wav"],[n.forest]:["/sounds/forest_01_a.wav","/sounds/forest_01_b.wav","/sounds/forest_01_c.wav","/sounds/forest_01_d.wav","/sounds/forest_01_e.wav"],[n.snow]:["/sounds/snow_01_a.wav","/sounds/snow_01_b.wav","/sounds/snow_01_c.wav","/sounds/snow_01_d.wav"],[n.marble]:["/sounds/marble_01_a.wav","/sounds/marble_01_b.wav","/sounds/marble_01_c.wav","/sounds/marble_01_d.wav"],[n.mud]:["/sounds/mud_01_a.wav","/sounds/mud_01_b.wav","/sounds/mud_01_c.wav","/sounds/mud_01_d.wav"],[n.path]:["/sounds/path_01_a.wav","/sounds/path_01_b.wav","/sounds/path_01_c.wav","/sounds/path_01_d.wav","/sounds/path_01_e.wav"],[n.stone]:["/sounds/stone_01_a.wav","/sounds/stone_01_b.wav","/sounds/stone_01_c.wav","/sounds/stone_01_d.wav","/sounds/stone_01_e.wav"],[n.water]:["/sounds/water_01_a.wav","/sounds/water_01_b.wav"],[n.sand]:["/sounds/sand_01_a.wav","/sounds/sand_01_b.wav","/sounds/sand_01_c.wav"]},b={volume:.15,loop:!1,rate:1.5,detune:1,delay:0,seek:0,mute:!1};let a,i=[];function f(o){if(!d[o])return;const e=Math.floor(Math.random()*d[o].length);a=WA.sound.loadSound(`/stepFX${d[o][e]}`),a.play(b)}async function h(){var o;try{const e=await _(),t=[];for(const s of e.values())if(s.type==="objectgroup"){for(const r of s.objects)if(r.properties&&r.properties.some(u=>u.name==="stepSound"&&u.value===!0)){const u=(o=r.properties.find(w=>w.name==="material"))==null?void 0:o.value;d[u]&&t.push({name:r.name,x:r.x,y:r.y,width:r.width,height:r.height,material:u})}}return console.log("Found step sound areas:",t),t}catch(e){return console.error("Error while getting step sound areas:",e),[]}}function g(o,e){return o.x>=e.x&&o.x<=e.x+e.width&&o.y>=e.y&&o.y<=e.y+e.height}async function m(o){try{for(const e of i)if(g(o,e))return e.material;return null}catch(e){return console.error("Error while checking player material:",e),null}}WA.onInit().then(async()=>{i=await h()});console.log("Script started successfully");let c;WA.onInit().then(()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags),WA.room.area.onEnter("clock").subscribe(()=>{const o=new Date,e=o.getHours()+":"+o.getMinutes();c=WA.ui.openPopup("clockPopup","It's "+e,[])}),WA.room.area.onLeave("clock").subscribe(p),v().then(()=>{console.log("Scripting API Extra ready")}).catch(o=>console.error(o))}).catch(o=>console.error(o));function p(){c!==void 0&&(c.close(),c=void 0)}async function l(){var o=WA.state.textVariable;console.log("Text is configured as "+o);var e=WA.state.colorVariable;console.log("Color is configured as "+e);var t=`https://iw6tkif7th7yp5ax2ufzkl3kce0bcuys.lambda-url.us-east-1.on.aws/?text=${encodeURIComponent(o)}&imageType=caption&width=88&height=24&color=${encodeURIComponent(e)}`;console.log("New img-url of title is "+t);const s=await WA.room.website.get("titleScreen");s.url=t,s.visible=!0,console.log(`Title has been changed to ${s.url}`)}WA.onInit().then(()=>{l()});WA.state.onVariableChange("textVariable").subscribe(()=>{console.log("Text variable changed"),l()});WA.state.onVariableChange("colorVariable").subscribe(()=>{console.log("Color variable changed"),l()});WA.onInit().then(()=>{WA.room.area.onEnter("hideRoofZone").subscribe(()=>{WA.room.hideLayer("above-roof/above-roof1"),WA.room.hideLayer("above-roof/above-roof2"),WA.room.hideLayer("above-roof/above-roof3")}),WA.room.area.onLeave("hideRoofZone").subscribe(()=>{WA.room.showLayer("above-roof/above-roof1"),WA.room.showLayer("above-roof/above-roof2"),WA.room.showLayer("above-roof/above-roof3")})});WA.onInit().then(async()=>{WA.player.onPlayerMove(async({x:o,y:e,moving:t})=>{const s=await m({x:o,y:e});return console.log(s),!s||!t&&!s?a==null?void 0:a.stop():(a==null||a.stop(),f(s))})});
//# sourceMappingURL=smallOffice-main-e48437fc.js.map
