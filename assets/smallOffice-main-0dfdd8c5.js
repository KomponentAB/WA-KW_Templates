import{b}from"./init-45730ad6.js";import{c as f,m as n,p as u}from"./footstep-27b9ed04.js";console.log("Script started successfully");let t;WA.onInit().then(()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags),WA.room.area.onEnter("clock").subscribe(()=>{const o=new Date,r=o.getHours()+":"+o.getMinutes();t=WA.ui.openPopup("clockPopup","It's "+r,[])}),WA.room.area.onLeave("clock").subscribe(A),b().then(()=>{console.log("Scripting API Extra ready")}).catch(o=>console.error(o))}).catch(o=>console.error(o));function A(){t!==void 0&&(t.close(),t=void 0)}async function s(){var o=WA.state.textVariable;console.log("Text is configured as "+o);var r=WA.state.colorVariable;console.log("Color is configured as "+r);var a=`https://iw6tkif7th7yp5ax2ufzkl3kce0bcuys.lambda-url.us-east-1.on.aws/?text=${encodeURIComponent(o)}&imageType=caption&width=88&height=24&color=${encodeURIComponent(r)}`;console.log("New img-url of title is "+a);const e=await WA.room.website.get("titleScreen");e.url=a,e.visible=!0,console.log(`Title has been changed to ${e.url}`)}WA.onInit().then(()=>{s()});WA.state.onVariableChange("textVariable").subscribe(()=>{console.log("Text variable changed"),s()});WA.state.onVariableChange("colorVariable").subscribe(()=>{console.log("Color variable changed"),s()});WA.onInit().then(()=>{WA.room.area.onEnter("hideRoofZone").subscribe(()=>{WA.room.hideLayer("above-roof/above-roof1"),WA.room.hideLayer("above-roof/above-roof2"),WA.room.hideLayer("above-roof/above-roof3")}),WA.room.area.onLeave("hideRoofZone").subscribe(()=>{WA.room.showLayer("above-roof/above-roof1"),WA.room.showLayer("above-roof/above-roof2"),WA.room.showLayer("above-roof/above-roof3")})});WA.onInit().then(()=>{WA.room.onEnterLayer("hideRoof").subscribe(()=>{WA.room.hideLayer("above-roof/above-roof1"),WA.room.hideLayer("above-roof/above-roof2"),WA.room.hideLayer("above-roof/above-roof3")}),WA.room.onLeaveLayer("hideRoof").subscribe(()=>{WA.room.showLayer("above-roof/above-roof1"),WA.room.showLayer("above-roof/above-roof2"),WA.room.showLayer("above-roof/above-roof3")})});WA.onInit().then(async()=>{WA.player.onPlayerMove(async({x:o,y:r,moving:a})=>{var l,i,c;const e=await f({x:o,y:r});return console.log(e),e?!a&&!e?(i=n)==null?void 0:i.stop():((c=n)==null||c.stop(),u(e)):(l=n)==null?void 0:l.stop()})});WA.onInit().then(()=>{let o,r;WA.room.area.onEnter("bellZone").subscribe(()=>{r=WA.player.name,o=WA.ui.displayActionMessage({type:"message",message:"Press SPACE to ring the bell",callback:()=>{WA.event.broadcast("bell-rang",`${r}`)}})}),WA.room.area.onLeave("bellZone").subscribe(()=>{o!==void 0&&(o.remove(),o=void 0)}),WA.onInit().then(()=>{const a=WA.sound.loadSound("./error2.wav");WA.event.on("bell-rang").subscribe(async e=>{a.play({}),WA.ui.banner.openBanner({id:"bellNotification",text:`${e.data} has rang the bell!`,bgColor:"#ffcc00",textColor:"#000000",closable:!0})})})}).catch(o=>console.error(o));
//# sourceMappingURL=smallOffice-main-0dfdd8c5.js.map
