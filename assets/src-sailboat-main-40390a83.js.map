{"version":3,"file":"src-sailboat-main-40390a83.js","sources":["../../src/sailboat-main.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n/// <reference types=\"vite/client\" />\n\nimport { bootstrapExtra } from \"@workadventure/scripting-api-extra\";\nimport { checkPlayerMaterial, mySound, playRandomSound } from \"./footstep\";\nimport { setupFireworks } from \"./fireworks\";\nsetupFireworks();\nconsole.log('Script started successfully');\n\nWA.onInit().then(() => {        WA.nav.goToRoom(\"#start\")})\n\nlet currentPopup: any = undefined;\n\n// Waiting for the API to be ready\nWA.onInit().then(() => {\n    console.log('Scripting API ready');\n    console.log('Player tags: ',WA.player.tags)\n\n    WA.room.area.onEnter('clock').subscribe(() => {\n        const today = new Date();\n        const time = today.getHours() + \":\" + today.getMinutes();\n        currentPopup = WA.ui.openPopup(\"clockPopup\", \"It's \" + time, []);\n    })\n\n    WA.room.area.onLeave('clock').subscribe(closePopup)\n\n    // The line below bootstraps the Scripting API Extra library that adds a number of advanced properties/features to WorkAdventure\n    bootstrapExtra().then(() => {\n        console.log('Scripting API Extra ready');\n    }).catch(e => console.error(e));\n\n}).catch(e => console.error(e));\n\nfunction closePopup(){\n    if (currentPopup !== undefined) {\n        currentPopup.close();\n        currentPopup = undefined;\n    }\n}\n\nWA.onInit().then(() => {\n    console.log('Scripting API ready');\n    console.log('Player tags: ', WA.player.tags);\n\n    const stairMappings = {\n        stairTopToMiddleLeft: \"#entryMiddleLeft\",\n        stairTopToMiddleRight: \"#entryMiddleRight\",\n        stairMiddleToTopLeft: \"#entryTopLeft\",\n        stairMiddleToTopRight: \"#entryTopRight\",\n        stairMiddleToBottom: \"#entryBottom\",\n        stairBottomToMiddle: \"#entryMiddleFromBottom\"\n    };\n\n    Object.entries(stairMappings).forEach(([area, room]) => {\n        WA.room.area.onEnter(area).subscribe(() => {\n            WA.nav.goToRoom(room);\n        });\n    });\n}).catch(e => console.error(e));\n\nWA.onInit().then(async () => {\n    WA.player.onPlayerMove(async ({ x, y, moving }) => {\n      const material = await checkPlayerMaterial({ x, y });\n      console.log(material);\n  \n      if (!material) {\n        return mySound?.stop();\n      }\n  \n      if (!moving && !material) {\n        return mySound?.stop();\n      } else {\n        mySound?.stop();\n        return playRandomSound(material);\n      }\n    });\n  });\n\n\nexport {};\n"],"names":["setupFireworks","currentPopup","today","time","closePopup","bootstrapExtra","e","area","room","x","y","moving","material","checkPlayerMaterial","_b","mySound","_c","playRandomSound","_a"],"mappings":"wGAMAA,IACA,QAAQ,IAAI,6BAA6B,EAEzC,GAAG,OAAA,EAAS,KAAK,IAAM,CAAY,GAAA,IAAI,SAAS,QAAQ,CAAC,CAAC,EAE1D,IAAIC,EAGJ,GAAG,OAAA,EAAS,KAAK,IAAM,CACnB,QAAQ,IAAI,qBAAqB,EACjC,QAAQ,IAAI,gBAAgB,GAAG,OAAO,IAAI,EAE1C,GAAG,KAAK,KAAK,QAAQ,OAAO,EAAE,UAAU,IAAM,CACpC,MAAAC,MAAY,KACZC,EAAOD,EAAM,SAAA,EAAa,IAAMA,EAAM,aAC5CD,EAAe,GAAG,GAAG,UAAU,aAAc,QAAUE,EAAM,CAAA,CAAE,CAAA,CAClE,EAED,GAAG,KAAK,KAAK,QAAQ,OAAO,EAAE,UAAUC,CAAU,EAGnCC,EAAA,EAAE,KAAK,IAAM,CACxB,QAAQ,IAAI,2BAA2B,CAAA,CAC1C,EAAE,SAAW,QAAQ,MAAMC,CAAC,CAAC,CAElC,CAAC,EAAE,MAAMA,GAAK,QAAQ,MAAMA,CAAC,CAAC,EAE9B,SAASF,GAAY,CACbH,IAAiB,SACjBA,EAAa,MAAM,EACJA,EAAA,OAEvB,CAEA,GAAG,OAAA,EAAS,KAAK,IAAM,CACnB,QAAQ,IAAI,qBAAqB,EACjC,QAAQ,IAAI,gBAAiB,GAAG,OAAO,IAAI,EAWpC,OAAA,QATe,CAClB,qBAAsB,mBACtB,sBAAuB,oBACvB,qBAAsB,gBACtB,sBAAuB,iBACvB,oBAAqB,eACrB,oBAAqB,wBAAA,CAGG,EAAE,QAAQ,CAAC,CAACM,EAAMC,CAAI,IAAM,CACpD,GAAG,KAAK,KAAK,QAAQD,CAAI,EAAE,UAAU,IAAM,CACpC,GAAA,IAAI,SAASC,CAAI,CAAA,CACvB,CAAA,CACJ,CACL,CAAC,EAAE,MAAMF,GAAK,QAAQ,MAAMA,CAAC,CAAC,EAE9B,GAAG,OAAA,EAAS,KAAK,SAAY,CACzB,GAAG,OAAO,aAAa,MAAO,CAAE,EAAAG,EAAG,EAAAC,EAAG,OAAAC,KAAa,WACjD,MAAMC,EAAW,MAAMC,EAAoB,CAAE,EAAAJ,EAAG,EAAAC,CAAG,CAAA,EAGnD,OAFA,QAAQ,IAAIE,CAAQ,EAEfA,EAID,CAACD,GAAU,CAACC,GACPE,EAAAC,IAAA,YAAAD,EAAS,SAEhBE,EAAAD,IAAA,MAAAC,EAAS,OACFC,EAAgBL,CAAQ,IAPxBM,EAAAH,IAAA,YAAAG,EAAS,MAQlB,CACD,CACH,CAAC"}