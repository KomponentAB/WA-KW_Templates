let n="https://admin.workadventu.re";function a(){const o=WA.player.userRoomToken;if(o===void 0)throw new Error("No userRoomToken found. The quests plugin can only work with WorkAdventure SAAS edition (at https://play.workadventu.re).");return o}async function d(o){const t=new URL(`/api/quests/${o}/leaderboard`,n);t.search=new URLSearchParams({room:WA.room.id}).toString();const e=await fetch(t,{method:"GET",headers:{Authorization:a()}});if(!e.ok)throw new Error(`An error occurred. HTTP Code: ${e.status} ${e.statusText}.`);return await e.json()}function u(o){const t=new URL(`/quests/${o}/leaderboard`,n);return t.search=new URLSearchParams({room:WA.room.id,token:a()}).toString(),t}async function w(o,t){if(!WA.player.isLogged)throw new Error("You must be logged to gain XP.");const e=new URL(`/api/quests/${o}/level-up`,n),r=await fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:a()},body:JSON.stringify({xp:t})});if(!r.ok)throw new Error(`An error occurred. HTTP Code: ${r.status} ${r.statusText}.`);const s=await r.json();return s.awardedBadges.length>0&&(async()=>{for(const i of s.awardedBadges)await c(o,i)})().catch(i=>{console.error(i)}),s}async function c(o,t){const e=new URL(`/quests/${o}/badge/${t}/congratulations`,n);e.search=new URLSearchParams({token:a()}).toString(),await WA.ui.website.open({url:e.toString(),position:{vertical:"middle",horizontal:"middle"},allowApi:!0,visible:!0,size:{width:"100%",height:"100%"}})}export{u as h,w as l,d as w};
//# sourceMappingURL=quests-e203e53d.js.map
