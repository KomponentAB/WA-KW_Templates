let i="https://admin.workadventu.re";function s(){const o=WA.player.userRoomToken;if(o===void 0)throw new Error("No userRoomToken found. The quests plugin can only work with WorkAdventure SAAS edition (at https://play.workadventu.re).");return o}async function d(o){const e=new URL(`/api/quests/${o}/leaderboard`,i);e.search=new URLSearchParams({room:WA.room.id}).toString();const t=await fetch(e,{method:"GET",headers:{Authorization:s()}});if(!t.ok)throw new Error(`An error occurred. HTTP Code: ${t.status} ${t.statusText}.`);return await t.json()}async function u(o,e){if(!WA.player.isLogged)throw new Error("You must be logged to gain XP.");const t=new URL(`/api/quests/${o}/level-up`,i),r=await fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:s()},body:JSON.stringify({xp:e})});if(!r.ok)throw new Error(`An error occurred. HTTP Code: ${r.status} ${r.statusText}.`);const n=await r.json();return n.awardedBadges.length>0&&(async()=>{for(const a of n.awardedBadges)await c(o,a)})().catch(a=>{console.error(a)}),n}async function c(o,e){const t=new URL(`/quests/${o}/badge/${e}/congratulations`,i);t.search=new URLSearchParams({token:s()}).toString(),await WA.ui.website.open({url:t.toString(),position:{vertical:"middle",horizontal:"middle"},allowApi:!0,visible:!0,size:{width:"100%",height:"100%"}})}export{u as l,d as w};
//# sourceMappingURL=quests-c50db8a7.js.map
