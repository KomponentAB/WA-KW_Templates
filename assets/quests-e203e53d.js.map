{"version":3,"file":"quests-e203e53d.js","sources":["../../node_modules/@workadventure/quests/dist/quests.js"],"sourcesContent":["let r = \"https://admin.workadventu.re\";\nfunction c(e) {\n  r = e;\n}\nfunction n() {\n  const e = WA.player.userRoomToken;\n  if (e === void 0)\n    throw new Error(\n      \"No userRoomToken found. The quests plugin can only work with WorkAdventure SAAS edition (at https://play.workadventu.re).\"\n    );\n  return e;\n}\nasync function d(e) {\n  const t = new URL(`/api/quests/${e}`, r);\n  t.search = new URLSearchParams({ room: WA.room.id }).toString();\n  const o = await fetch(t, {\n    method: \"GET\",\n    headers: {\n      Authorization: n()\n    }\n  });\n  if (!o.ok)\n    throw new Error(`An error occurred. HTTP Code: ${o.status} ${o.statusText}.`);\n  return await o.json();\n}\nasync function w(e) {\n  const t = new URL(`/api/quests/${e}/leaderboard`, r);\n  t.search = new URLSearchParams({ room: WA.room.id }).toString();\n  const o = await fetch(t, {\n    method: \"GET\",\n    headers: {\n      Authorization: n()\n    }\n  });\n  if (!o.ok)\n    throw new Error(`An error occurred. HTTP Code: ${o.status} ${o.statusText}.`);\n  return await o.json();\n}\nfunction h(e) {\n  const t = new URL(`/quests/${e}/leaderboard`, r);\n  return t.search = new URLSearchParams({ room: WA.room.id, token: n() }).toString(), t;\n}\nasync function l(e, t) {\n  if (!WA.player.isLogged)\n    throw new Error(\"You must be logged to gain XP.\");\n  const o = new URL(`/api/quests/${e}/level-up`, r), a = await fetch(o, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: n()\n    },\n    body: JSON.stringify({ xp: t })\n  });\n  if (!a.ok)\n    throw new Error(`An error occurred. HTTP Code: ${a.status} ${a.statusText}.`);\n  const s = await a.json();\n  return s.awardedBadges.length > 0 && (async () => {\n    for (const i of s.awardedBadges)\n      await u(e, i);\n  })().catch((i) => {\n    console.error(i);\n  }), s;\n}\nasync function u(e, t) {\n  const o = new URL(`/quests/${e}/badge/${t}/congratulations`, r);\n  o.search = new URLSearchParams({ token: n() }).toString(), await WA.ui.website.open({\n    url: o.toString(),\n    position: {\n      vertical: \"middle\",\n      horizontal: \"middle\"\n    },\n    allowApi: !0,\n    visible: !0,\n    size: {\n      width: \"100%\",\n      height: \"100%\"\n    }\n  });\n}\nexport {\n  w as getLeaderboard,\n  h as getLeaderboardURL,\n  d as getQuest,\n  l as levelUp,\n  c as setQuestBaseUrl\n};\n"],"names":["r","n","e","w","o","h","l","a","u"],"mappings":"AAAA,IAAIA,EAAI,+BAIR,SAASC,GAAI,CACX,MAAMC,EAAI,GAAG,OAAO,cACpB,GAAIA,IAAM,OACR,MAAM,IAAI,MACR,2HACN,EACE,OAAOA,CACT,CAcA,eAAeC,EAAED,EAAG,CAClB,MAAM,EAAI,IAAI,IAAI,eAAeA,CAAC,eAAgBF,CAAC,EACnD,EAAE,OAAS,IAAI,gBAAgB,CAAE,KAAM,GAAG,KAAK,EAAE,CAAE,EAAE,WACrD,MAAMI,EAAI,MAAM,MAAM,EAAG,CACvB,OAAQ,MACR,QAAS,CACP,cAAeH,EAAG,CACnB,CACL,CAAG,EACD,GAAI,CAACG,EAAE,GACL,MAAM,IAAI,MAAM,iCAAiCA,EAAE,MAAM,IAAIA,EAAE,UAAU,GAAG,EAC9E,OAAO,MAAMA,EAAE,MACjB,CACA,SAASC,EAAEH,EAAG,CACZ,MAAM,EAAI,IAAI,IAAI,WAAWA,CAAC,eAAgBF,CAAC,EAC/C,OAAO,EAAE,OAAS,IAAI,gBAAgB,CAAE,KAAM,GAAG,KAAK,GAAI,MAAOC,EAAG,CAAA,CAAE,EAAE,SAAQ,EAAI,CACtF,CACA,eAAeK,EAAEJ,EAAG,EAAG,CACrB,GAAI,CAAC,GAAG,OAAO,SACb,MAAM,IAAI,MAAM,gCAAgC,EAClD,MAAME,EAAI,IAAI,IAAI,eAAeF,CAAC,YAAaF,CAAC,EAAGO,EAAI,MAAM,MAAMH,EAAG,CACpE,OAAQ,OACR,QAAS,CACP,OAAQ,mBACR,eAAgB,mBAChB,cAAeH,EAAG,CACnB,EACD,KAAM,KAAK,UAAU,CAAE,GAAI,CAAC,CAAE,CAClC,CAAG,EACD,GAAI,CAACM,EAAE,GACL,MAAM,IAAI,MAAM,iCAAiCA,EAAE,MAAM,IAAIA,EAAE,UAAU,GAAG,EAC9E,MAAM,EAAI,MAAMA,EAAE,OAClB,OAAO,EAAE,cAAc,OAAS,IAAM,SAAY,CAChD,UAAW,KAAK,EAAE,cAChB,MAAMC,EAAEN,EAAG,CAAC,CAClB,KAAO,MAAO,GAAM,CAChB,QAAQ,MAAM,CAAC,CAChB,CAAA,EAAG,CACN,CACA,eAAeM,EAAEN,EAAG,EAAG,CACrB,MAAME,EAAI,IAAI,IAAI,WAAWF,CAAC,UAAU,CAAC,mBAAoBF,CAAC,EAC9DI,EAAE,OAAS,IAAI,gBAAgB,CAAE,MAAOH,EAAG,CAAA,CAAE,EAAE,SAAU,EAAE,MAAM,GAAG,GAAG,QAAQ,KAAK,CAClF,IAAKG,EAAE,SAAU,EACjB,SAAU,CACR,SAAU,SACV,WAAY,QACb,EACD,SAAU,GACV,QAAS,GACT,KAAM,CACJ,MAAO,OACP,OAAQ,MACT,CACL,CAAG,CACH","x_google_ignoreList":[0]}