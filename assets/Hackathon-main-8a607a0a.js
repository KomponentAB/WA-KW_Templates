import{b as m}from"./init-ecf2287f.js";import{l as $}from"./quests-e203e53d.js";WA.onInit().then(()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags),m().then(()=>{console.log("Scripting API Extra ready")}).catch(e=>console.error(e))}).catch(e=>console.error(e));console.log("Script started successfully");WA.onInit().then(async()=>{console.log("Initializing scavenger hunt logic");const a=(await WA.mapEditor.area.list()).filter(o=>o.name.startsWith("SCAVENGER_"));console.log("Found scavenger areas:",a);for(const o of a){const[t,n,l,s]=o.name.split("_");console.log(`Setting up scavenger area: ${o.name}`,{questName:n,objectName:l,exp:s}),WA.mapEditor.area.onEnter(o.name).subscribe(async()=>{console.log(`Player entered scavenger area: ${o.name}`);const i=`collected_${o.name}`,c=await WA.player.state[i];console.log(`Checked collection status for ${i}: ${c}`);const d={"en-US":`You leveled up in Quest "${n}" by interacting with "${l}" and gained ${s} EXP!`,"de-DE":`Du hast in der Quest "${n}" aufgelevelt, indem du mit "${l}" interagiert hast, und ${s} EXP gewonnen!`,"fr-FR":`Vous avez montÃ© de niveau dans la quÃªte "${n}" en interagissant avec "${l}" et avez gagnÃ© ${s} EXP!`,"it-IT":`Hai salito di livello nella Quest "${n}" interagendo con "${l}" e hai guadagnato ${s} EXP!`,"es-ES":`Â¡Subiste de nivel en la misiÃ³n "${n}" al interactuar con "${l}" y ganaste ${s} EXP!`,"pt-BR":`VocÃª subiu de nÃ­vel na Quest "${n}" ao interagir com "${l}" e ganhou ${s} EXP!`},u={"en-US":`You have already collected the item "${l}" in Quest "${n}".`,"de-DE":`Du hast den Gegenstand "${l}" in der Quest "${n}" bereits eingesammelt.`,"fr-FR":`Vous avez dÃ©jÃ  collectÃ© l'objet "${l}" dans la quÃªte "${n}".`,"it-IT":`Hai giÃ  raccolto l'oggetto "${l}" nella Quest "${n}".`,"es-ES":`Ya has recolectado el objeto "${l}" en la misiÃ³n "${n}".`,"pt-BR":`VocÃª jÃ¡ coletou o item "${l}" na Quest "${n}".`},p=WA.player.language;if(c){const g=u[p]||u["en-US"];console.log(`Item already collected: ${g}`),WA.chat.sendChatMessage(g,"system")}else{const g=d[p]||d["en-US"];console.log(`Sending level up message: ${g}`),WA.chat.sendChatMessage(g,"system"),$(n,Number(s)),WA.player.state[i]="collected"}})}});async function r(e){console.log(`updateTitle called with variableName: ${e}`);var a=WA.state[e];console.log(`Text for ${e} is configured as `+a);var o=e.split("-")[0],t=`https://iw6tkif7th7yp5ax2ufzkl3kce0bcuys.lambda-url.us-east-1.on.aws/?text=${encodeURIComponent(a)}&imageType=caption&width=78&height=50&color=${o}`;console.log("New img-url of title is "+t);const n=await WA.room.website.get(e.replace("text","display"));n.url=t,n.visible=!0,console.log(`Title for ${e} has been changed to ${n.url}`)}WA.onInit().then(()=>{console.log("Initializing title updates"),r("purple-text"),r("blue-text"),r("red-text"),r("green-text"),r("yellow-text"),r("orange-text"),r("black-text")});["purple-text","blue-text","red-text","green-text","yellow-text","orange-text","black-text"].forEach(e=>{WA.state.onVariableChange(e).subscribe(()=>{console.log(`${e} variable changed`),r(e)})});const b={Yellow:{x:1260,y:1370},Orange:{x:1260,y:1800},Green:{x:1260,y:900},Blue:{x:500,y:1330},Purple:{x:500,y:1760},Red:{x:500,y:900},Auditorium:{x:600,y:1550}};function A(e){console.log(`addGroupButton called with groupName: ${e}`),setTimeout(()=>{WA.onInit().then(()=>{console.log(`Setting up group button for ${e}`);const a=`code${e}`,o=WA.state[a];console.log(`Room code for ${e}: ${o}`);const t={"en-US":`The code to the ${e}-Room is: ${o}.`,"fr-FR":`Le code de la salle ${e} est : ${o}.`,"it-IT":`Il codice per la stanza ${e} Ã¨: ${o}.`,"pt-BR":`O cÃ³digo para a sala ${e} Ã©: ${o}.`,"es-ES":`El cÃ³digo para la sala ${e} es: ${o}.`,"zh-CN":`${e}æˆ¿é—´çš„ä»£ç æ˜¯ï¼š${o}ã€‚`,"ar-SA":`Ø±Ù…Ø² Ø§Ù„ØºØ±ÙØ© ${e} Ù‡Ùˆ: ${o}.`,"de-DE":`Der Code fÃ¼r den ${e}-Raum lautet: ${o}.`},n=WA.player.language,l=t[n]||t["en-US"];console.log(`Sending chat message in language: ${n}`),WA.chat.sendChatMessage(l,"system")})},2e3),WA.ui.actionBar.addButton({id:"roomNavigate-btn",label:`[${e} Room]`,toolTip:"Go to your Breakout-Room.",callback:()=>{console.log(`Room navigation button clicked for ${e}`),h();const a=b[e];console.log("Moving to coordinates:",a),WA.player.moveTo(a.x,a.y,10).then(o=>{if(o.cancelled)console.log(`Movement cancelled for ${e}`);else{console.log(`Successfully moved to ${e}`);const t=`code${e}`,n=WA.state[t];WA.ui.banner.openBanner({id:"room-code",text:`ğŸ” ğŸšª The Code to the ${e}-Room is: ${n}.`,bgColor:"#25222d",textColor:"#ffffff",closable:!0,timeToClose:1e5})}})}})}function h(){console.log("removeGroupButton called"),WA.onInit().then(()=>{console.log("Removing room navigation button"),WA.ui.actionBar.removeButton("roomNavigate-btn")})}WA.onInit().then(()=>{console.log("Setting up ping/pong event listener"),WA.event.on("ping").subscribe(e=>{if(console.log("Received ping event:",e),e.data==="start"){const a=WA.player.uuid;console.log(`Ping start - Player ID: ${a}`),a?WA.event.broadcast("pong",a):console.error("Player UUID is undefined")}else e.data==="stop"&&(console.log("Ping stop - removing outline color"),WA.player.removeOutlineColor())})});WA.onInit().then(()=>{console.log("Setting up player-specific event listener");const e=WA.player.uuid;console.log(`Player UUID: ${e}`),e?WA.event.on(e).subscribe(a=>{console.log(`Received event for player UUID ${e}:`,a);const o=a.data;f(o)}):console.error("Player UUID is undefined")});function f(e){console.log(`handleGroupAssignment called with groupName: ${e}`),WA.onInit().then(()=>{const o={Yellow:{r:255,g:255,b:0},Orange:{r:255,g:102,b:0},Green:{r:57,g:255,b:20},Red:{r:255,g:26,b:26},Blue:{r:0,g:120,b:255},Purple:{r:255,g:20,b:147}}[e];if(console.log(`Color for ${e}:`,o),o){WA.player.setOutlineColor(o.r,o.g,o.b),console.log(`Set outline color for ${e}`);const n=`${{Yellow:"ğŸŸ¨",Orange:"ğŸŸ§",Green:"ğŸŸ©",Blue:"ğŸŸ¦",Purple:"ğŸŸª",Red:"ğŸŸ¥"}[e]} ${WA.state[`${e}-text`]||`${e.charAt(0).toUpperCase()+e.slice(1)} Room`}`;console.log(`Room name: ${n}`);const l={"en-US":`You have been assigned to the ${n}.`,"fr-FR":`Vous avez Ã©tÃ© assignÃ© Ã  la ${n}.`,"it-IT":`Sei stato assegnato alla ${n}.`,"pt-BR":`VocÃª foi designado para a ${n}.`,"es-ES":`Has sido asignado a la ${n}.`,"zh-CN":`ä½ å·²è¢«åˆ†é…åˆ°${n}ã€‚`,"ar-SA":`Ù„Ù‚Ø¯ ØªÙ… ØªØ¹ÙŠÙŠÙ†Ùƒ Ø¥Ù„Ù‰ ${n}.`,"de-DE":`Sie wurden dem ${n} zugewiesen.`},s=WA.player.language,i=l[s]||l["en-US"];console.log(`Opening banner in language: ${s}`),WA.ui.banner.openBanner({id:"group-assignment",text:i,bgColor:`rgb(${o.r}, ${o.g}, ${o.b})`,textColor:"#000000",closable:!0,timeToClose:1e4}),A(e);const c={"en-US":`You have been assigned to the ${n}. The fastest way to get there is by clicking on the colored button at the bottom of your screen.`,"fr-FR":`Vous avez Ã©tÃ© assignÃ© au ${n}. Le moyen le plus rapide de vous y rendre est de cliquer sur le bouton colorÃ© en bas de votre Ã©cran.`,"it-IT":`Sei stato assegnato al ${n}. Il modo piÃ¹ veloce per arrivarci Ã¨ cliccare sul pulsante colorato in fondo allo schermo.`,"pt-BR":`VocÃª foi designado para o ${n}. A maneira mais rÃ¡pida de chegar lÃ¡ Ã© clicando no botÃ£o colorido na parte inferior da sua tela.`,"es-ES":`Has sido asignado al ${n}. La forma mÃ¡s rÃ¡pida de llegar es haciendo clic en el botÃ³n de color en la parte inferior de tu pantalla.`,"zh-CN":`ä½ å·²è¢«åˆ†é…åˆ°${n}ã€‚æœ€å¿«çš„æ–¹æ³•æ˜¯ç‚¹å‡»å±å¹•åº•éƒ¨çš„å½©è‰²æŒ‰é’®`,"ar-SA":`Ù„Ù‚Ø¯ ØªÙ… ØªØ¹ÙŠÙŠÙ†Ùƒ Ø¥Ù„Ù‰ ${n}.  Ù‡Ù†Ø§Ùƒ Ù‡ÙŠ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ù„ÙˆÙ† ÙÙŠ Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø©. Ø±Ù…Ø² Ø§Ù„ØºØ±ÙØ© Ù‡Ùˆ`,"de-DE":`Du wurdest dem ${n} zugewiesen. Der schnellste Weg dorthin ist, auf den farbigen Knopf unten auf deinem Bildschirm zu klicken.`},d=c[s]||c["en-US"];console.log("Sending chat message for group assignment"),WA.chat.sendChatMessage(d,"system")}else console.warn("Unknown group name:",e)})}WA.onInit().then(()=>{console.log("Initializing grouping button logic");function e(){console.log("addStartGroupingButton called"),WA.ui.actionBar.removeButton("startGrouping-btn"),WA.ui.actionBar.addButton({id:"endGrouping-btn",label:"end group",toolTip:"End Breakout Grouping",callback:()=>{console.log("End grouping button clicked"),WA.state.grouping=0,WA.ui.actionBar.removeButton("endGrouping-btn"),a(),WA.event.broadcast("addGroupingButton","pressed")}})}function a(){console.log("addEndGroupingButton called"),WA.ui.actionBar.removeButton("endGrouping-btn"),WA.ui.actionBar.addButton({id:"startGrouping-btn",label:"start group",toolTip:"Start Breakout Grouping",callback:()=>{console.log("Start grouping button clicked"),WA.state.grouping=1,WA.ui.actionBar.removeButton("startGrouping-btn"),e(),WA.event.broadcast("endGroupingButton","pressed")}})}WA.event.on("addGroupingButton").subscribe(o=>{console.log("addGroupingButton event received:",o),["admin","editor","moderator","hackmod"].some(t=>WA.player.tags.includes(t))&&(console.log("Player has required role"),o.data==="pressed"&&(console.log("Adding end grouping button"),WA.ui.actionBar.removeButton("startGrouping-btn"),a()))}),WA.event.on("endGroupingButton").subscribe(o=>{console.log("endGroupingButton event received:",o),["admin","editor","moderator","hackmod"].some(t=>WA.player.tags.includes(t))&&(console.log("Player has required role"),o.data==="pressed"&&(console.log("Adding start grouping button"),WA.ui.actionBar.removeButton("endGrouping-btn"),e()))}),WA.onInit().then(()=>{if(console.log("Checking for admin user and showGroupingButton variable"),WA.player.tags.includes("admin")){console.log("Player is admin, setting up showGroupingButton listener"),WA.state.onVariableChange("showGroupingButton").subscribe({next:()=>{console.log("showGroupingButton variable changed");const t=WA.state.showGroupingButton,n=Number(WA.state.grouping);console.log(`showGroupingButton: ${t}, groupingState: ${n}`),t==="show"?n===1?e():n===0&&a():t==="hide"&&(console.log("Hiding grouping buttons"),WA.ui.actionBar.removeButton("startGrouping-btn"),WA.ui.actionBar.removeButton("endGrouping-btn"))}});const o=Number(WA.state.grouping);console.log(`Initial groupingState: ${o}`),o===1?e():o===0&&a()}else console.log("Player is not admin, skipping grouping button setup")}),WA.onInit().then(()=>{console.log("Setting up lockAll variable listener");const o=()=>{console.log("handleLockAllChange called");const t=WA.state.lockAll;console.log(`lockAll state: ${t}`),t==="locked"?(console.log("Locking all rooms"),WA.room.hideLayer("above_opened"),WA.room.hideLayer("rooms_opened"),WA.room.showLayer("rooms_closed")):t==="open"&&(console.log("Opening all rooms"),WA.room.showLayer("above_opened"),WA.room.showLayer("rooms_opened"),WA.room.hideLayer("rooms_closed"))};o(),WA.state.onVariableChange("lockAll").subscribe(()=>{console.log("lockAll variable changed"),o()})}),WA.onInit().then(()=>{console.log("Setting up ping event with outline color logic"),WA.event.on("ping").subscribe(o=>{if(console.log("Ping event received:",o),o.data==="start"){console.log("Ping start - setting up outline");const t=WA.player.uuid;t?(WA.event.broadcast("pong",t),WA.event.on(t).subscribe(n=>{console.log(`Received event for player UUID ${t}:`,n)})):console.error("Player UUID is undefined")}else if(o.data==="stop"){console.log("Ping stop - cleaning up"),WA.player.removeOutlineColor(),h();const t={"en-US":"There is no group phase active at the moment. Please regroup with everyone else.","fr-FR":"Aucune phase de groupe n'est actuellement active. S'il te plaÃ®t, rassemble-toi Ã  nouveau avec tous les autres.","it-IT":"Al momento non Ã¨ attiva alcuna fase di gruppo. Si prega di riunirsi di nuovo con tutti gli altri.","pt-BR":"Nenhuma fase de grupo estÃ¡ ativa no momento. Por favor, reÃºna-se novamente com todos os outros.","es-ES":"Actualmente no hay ninguna fase de grupo activa. Por favor, reÃºnanse de nuevo con todos los demÃ¡s.","zh-CN":"ç›®å‰æ²¡æœ‰æ´»è·ƒçš„å°ç»„é˜¶æ®µã€‚è¯·ä¸å…¶ä»–äººé‡æ–°ç»„åˆã€‚","ar-SA":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø±Ø­Ù„Ø© Ù…Ø¬Ù…ÙˆØ¹Ø© Ù†Ø´Ø·Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ¬Ù…Ø¹ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù…Ø¹ Ø§Ù„Ø¬Ù…ÙŠØ¹.","de-DE":"Aktuell ist keine Gruppenphase aktiv. Bitte sammle dich wieder mit allen anderen."},n=t[WA.player.language]||t["en-US"];console.log(`Sending end message in language: ${WA.player.language}`),WA.chat.sendChatMessage(n,"system")}})})});
//# sourceMappingURL=Hackathon-main-8a607a0a.js.map
